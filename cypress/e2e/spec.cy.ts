describe("ethabiencode", () => {
  it("address[] calldata, uint80, uint32[2] and appends to existing vars", () => {
    cy.request(
      'POST', 
      'api/task', 
      {
        id: "task-0",
        name: 'ethabiencode',
        inputs: [],
        options: {
            abi: "chainLink(address[] calldata a, uint80 x, uint32[2] s)",
            data: `{ "a": $(foo), "x": $(bar), "s": $(baz) }`
        },
        vars: "eyJiYXIiOjgyOTMsImJheiI6WzE5Miw0MTgyXSwiZm9vIjpbIjB4NmM5MWIwNjJhNzc0Y2JlOGI5YmY1MmYyMjRjMzdiYWRmOThmYzQwYiIsIjB4YzRmMjdlYWQ5MDgzYzc1NmNjMmMwMmFhYTM5YjIyM2ZlOGQwYTBlNSIsIjB4NzQ5ZTQ1OTg4MTliMmIwZTkxNWEwMjEyMDY5NmM3YjhmZTE2YzA5YyJdfQ=="
      }
    ).then(
      (response) => {
        expect(JSON.stringify(response.body)).to.eq(
          JSON.stringify({
            "Value":"0xa3a122020000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000206500000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000105600000000000000000000000000000000000000000000000000000000000000030000000000000000000000006c91b062a774cbe8b9bf52f224c37badf98fc40b000000000000000000000000c4f27ead9083c756cc2c02aaa39b223fe8d0a0e5000000000000000000000000749e4598819b2b0e915a02120696c7b8fe16c09c",
            "Vars":{
              "bar":8293,
              "baz":[192,4182],
              "foo":[
                "0x6c91b062a774cbe8b9bf52f224c37badf98fc40b",
                "0xc4f27ead9083c756cc2c02aaa39b223fe8d0a0e5",
                "0x749e4598819b2b0e915a02120696c7b8fe16c09c"
              ],
              "task-0":"0xa3a122020000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000206500000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000105600000000000000000000000000000000000000000000000000000000000000030000000000000000000000006c91b062a774cbe8b9bf52f224c37badf98fc40b000000000000000000000000c4f27ead9083c756cc2c02aaa39b223fe8d0a0e5000000000000000000000000749e4598819b2b0e915a02120696c7b8fe16c09c"
            },
            "VarBytesBase64":"eyJiYXIiOjgyOTMsImJheiI6WzE5Miw0MTgyXSwiZm9vIjpbIjB4NmM5MWIwNjJhNzc0Y2JlOGI5YmY1MmYyMjRjMzdiYWRmOThmYzQwYiIsIjB4YzRmMjdlYWQ5MDgzYzc1NmNjMmMwMmFhYTM5YjIyM2ZlOGQwYTBlNSIsIjB4NzQ5ZTQ1OTg4MTliMmIwZTkxNWEwMjEyMDY5NmM3YjhmZTE2YzA5YyJdLCJ0YXNrLTAiOiIweGEzYTEyMjAyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDIwNjUwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGMwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTA1NjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDMwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA2YzkxYjA2MmE3NzRjYmU4YjliZjUyZjIyNGMzN2JhZGY5OGZjNDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwYzRmMjdlYWQ5MDgzYzc1NmNjMmMwMmFhYTM5YjIyM2ZlOGQwYTBlNTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDc0OWU0NTk4ODE5YjJiMGU5MTVhMDIxMjA2OTZjN2I4ZmUxNmMwOWMifQ=="
          })
        )
      }
    )
  })
})